/*
 * jQuery UI rlightbox2
 *
 * Copyright 2011 Wojciech ‘rrh’ Ryrych
 * licensed under the MIT license
 *
 * Depends:
 *   jquery.ui.core.js
 *   jquery.ui.widget.js
 */

(function(e,p){e.widget("ui.rlightbox",{options:{animationSpeed:"fast",setPrefix:"lb",showMap:!0,counterDelimiter:" / ",videoWidth:640,videoHeight:385,errorMessage:"Oh dear! Something went wrong! If the problem still appears let the page\u2019s admin know. Would you like to try again or reject the content?",againButtonLabel:"Try again",rejectButtonLabel:"Reject this content",overwriteTitle:!1,keys:{next:[78,39],previous:[80,37],close:[67,27],panorama:[90,null]},loop:!1},_create:function(){var a=e.ui.rlightbox.global,
b=this;a.getLightbox();var c=a.extractAnchor(this);c.type!==p&&(a.addToSet(c),this.element.click(function(c){a.open(b);c.preventDefault()}))},_setOption:function(a,b){}});e.extend(e.ui.rlightbox,{global:{addToSet:function(a){var b=this.getSetName(a.self),c=e.ui.rlightbox.global.sets,d=e("."+a.self.options.setPrefix+"_"+b).index(a.element);c[b]?c[b].splice(d,0,a):(c[b]=[],c[b].push(a))},checkButtonsState:function(){var a=this.data,b=this.$lightbox,c=a.totalElementsNumber,d=a.currentElementNumber,g=
a.currentSetElement.self.options.loop;"single"===a.currentSet||1===c?this.setButtonState("disabled"):1===d&&!1===g?(this.setButtonState("disabled",b.prev),this.setButtonState("default",b.next)):d===c&&!1===g?(this.setButtonState("disabled",b.next),this.setButtonState("default",b.prev)):this.setButtonState("default")},checkMinimalSize:function(a,b){var c=this.data.minimalLightboxSize,d=c.width;c=c.height;if("width"===a)return b<d?d:b;if("height"===a)return b<c?c:b},closeLightbox:function(){var a=this.data,
b=this.$lightbox;a.ready&&(b.overlay.add(b.root).add(b.header).hide(),e("body").css("overflow","visible"),b.content.empty().width(20).height(20),this.hideArrow(),this.setButtonState("default"),this.panoramaHideIcon(),a.currentElementNumber=null,a.totalElementsNumber=null,b.title.empty(),this.panoramaHideMap(),a.ready=!1)},createStructure:function(){var a=this.data;e(a.htmlLightbox).appendTo("body").after(a.htmlMap).after(a.htmlOverlay)},destroy:function(){this.data.currentSetElement.element.unbind(".rlightbox").unbind("click").removeData("rlightbox")},
extractAnchor:function(a){var b={type:p},c=e(a.element),d=c.attr("href");e.each({youtube:{urls:[/(http:\/\/www\.youtube\.com\/watch\?v=([\w-_]+))&?/],type:"youtube"},image:{urls:[/.jpg$|.png$|.gif$/],type:"image"},vimeo:{urls:[/(http:\/\/vimeo\.com\/groups\/\w+\/videos\/(\w+))&?/,/(http:\/\/vimeo\.com\/(\w+))&?/],type:"vimeo"},flash:{urls:[/.swf/],type:"flash"}},function(g,f){var l=!1;e.each(f.urls,function(g,e){var k=e.exec(d);if(null!==k){b={url:k[1],id:k[2],type:f.type,element:c,self:a};if("image"===
f.type||"flash"===f.type||a.options.overwriteTitle)b.title=c.attr("title"),b.url=d;l=!0;return!1}});if(l)return!1});return b},getAvailableScreenSize:function(){var a=this.data,b=a.lightboxPadding;return{width:this.getWindowSize("width")-b,height:this.getWindowSize("height")-a.headerHeight-b}},getCurrentElementNumber:function(a){var b;e.each(this.sets[this.data.currentSet],function(c,d){if(e(a).get(0)===d.element.get(0))return b=c+1,!1});return b},getImageStatus:function(a,b){var c=this.data,d=this.getWindowSize("width"),
g=this.getWindowSize("height"),f=c.minimalLightboxSize.width,e=c.minimalLightboxSize.height,h=c.lightboxPadding;c=c.headerHeight;return{statusWidth:a<=f?-1:a>f&&a+h<=d?1:2,statusHeight:b<=e?-1:b>e&&g>=b+h+c?1:2}},getLightbox:function(){var a=this.data,b=this.$lightbox,c=this;b.root||(this.createStructure(),this.setReferences(),b.close.add(b.overlay).click(e.proxy(this.closeLightbox,this)),b.next.click(e.proxy(this.next,this)),b.prev.click(e.proxy(this.prev,this)),b.next.add(b.prev).add(b.next).add(b.close).hover(function(){e(this).is(":not(.ui-state-disabled)")&&
c.setButtonState("highlight",e(this))},function(){e(this).is(":not(.ui-state-disabled)")&&c.setButtonState("default",e(this))}),b.contentContainer.mousemove(e.proxy(this.showArrow,this)).mousemove(e.proxy(this.checkSide,this)).mousemove(e.proxy(this.setCursor,this)).click(function(){"left"===a.side?c.prev.apply(c):"right"===a.side&&c.next.apply(c)}).mousedown(e.proxy(this.panoramaStart,this)).mouseup(e.proxy(this.panoramaStop,this)).mouseleave(function(){c.hideArrow.apply(c);a.side=""}),b.panoramaIcon.click(e.proxy(this.panoramaToggle,
this)).hover(e.proxy(this.panoramaHighlight,this)),e(window).bind("resize.rlightbox",e.proxy(this.liveResize,this)),e(document).keyup(e.proxy(this.handleKeyboard,this)))},getOptimalSize:function(a,b){var c=this.data.minimalLightboxSize,d=c.width;c=c.height;var g=this.getAvailableScreenSize(),f=g.width;g=g.height;if("width"===a)return b<d?d:b>f?f:b;if("height"===a)return b<c?c:b>g?g:b},getParam:function(a,b){var c=(new RegExp("[\\?&]"+a+"=(\\w+)")).exec(b);return null!==c?c[1]:null},getSetName:function(a){var b=
e(a.element).attr("class");return(a=(new RegExp(a.options.setPrefix+"_([\\w-_]+)")).exec(b))?a[1]:"single"},checkSide:function(a){var b=this.data,c=this.$lightbox.contentContainer,d=a.pageX-c.offset().left;c=Math.round(c.width()/2);d<=c?b.side="left":d>c&&(b.side="right");a.preventDefault()},getSizes:function(){function a(l,m){b=r.getImageStatus(l,m);c=b.statusWidth;d=b.statusHeight;if(!(1!==c&&-1!==c||2===d||1!==d&&-1!==d||2===c))1===c?e=l:-1===c&&(e=u),g=l,1===d?h=m:-1===d&&(h=v),f=m;else if(2===
c||2===d)1===c||-1===c?(f=h=p-t-q,k=h/m,-1===c?(e=u,g=Math.ceil(l*k)):(g=e=Math.ceil(l*k)-q,g<=u&&a(g,f))):1===d||-1===d?(g=e=w-q,n=e/l,-1===d?(h=v,f=Math.ceil(m*n)):(f=h=Math.ceil(m*n)-t-q,f<=v&&a(g,f))):l>m?(g=e=w-q,n=e/l,f=h=Math.ceil(m*n)-q-t,(f<=v||h+q+t>p)&&a(g,f)):(f=h=p-t-q,k=h/m,g=e=Math.ceil(l*k)-q,(g<=u||e>w)&&a(g,f))}var b,c,d,g,f,e,h,k,n,m=this.data,r=this,x=m.currentSetElement,w=this.getWindowSize("width"),p=this.getWindowSize("height"),u=m.minimalLightboxSize.width,v=m.minimalLightboxSize.height,
q=m.lightboxPadding,t=m.headerHeight;a(x.width,x.height);return{imageTargetWidth:g,imageTargetHeight:f,lightboxTargetWidth:e,lightboxTargetHeight:h,statusWidth:c,statusHeight:d}},getWindowSize:function(a){var b=this.data,c=e(window).width(),d=e(window).height(),g=b.minimalLightboxSize,f=b.lightboxPadding,l=g.width+f;b=g.height+f+b.headerHeight;return"width"===a?c<l?l:c:d<b?b:d},handleKeyboard:function(a){var b=this.data,c=b.currentSetElement,d=c.self.options.keys,g=a.which;!1!==b.ready&&(g===d.next[0]||
g===d.next[1]?this.next():g===d.previous[0]||g===d.previous[1]?this.prev():g===d.close[0]||g===d.close[1]?this.closeLightbox():g!==d.panorama[0]&&g!==d.panorama[1]||"image"!==c.type||this.panoramaToggle(a))},hideArrow:function(){this.$lightbox.arrow.hide()},liveResize:function(){var a=this.data,b=a.currentSetElement.type;a.ready&&!1===a.panoramaOn&&"image"===b?(this.queueResizeLightbox(),this.updateTitleWidth(),this.queueCenterContent(),this.panoramaCheckAvailability()):a.ready&&a.panoramaOn&&"image"===
b?(this.queueCenterLightbox(),this.panoramaShrink(),this.panoramaCheckAvailability()):a.ready&&"image"!==b&&this.queueCenterLightbox()},loadContentFlash:function(a){var b,c,d,g=this.data,f=this,l=this.$lightbox.content,h=e.Deferred(),k=g.htmlFlash,n=g.currentSetElement,m=n.self.options;l.addClass("ui-lightbox-loader");setTimeout(function(){b=f.getParam("width",a);c=f.getParam("height",a);if(null===b||isNaN(b))b=m.videoWidth;if(null===c||isNaN(c))c=m.videoHeight;n.width=b;n.height=c;k=f.replaceHtmlPatterns(k,
{width:b,height:c,url:a});d=e("<div></div>");d.css({display:"none",width:b,height:c});l.removeClass("ui-lightbox-loader").empty().append(k).children().wrap(d);h.resolve()},1E3);return h.promise()},loadContentImage:function(a){var b=this.$lightbox,c=this,d=this.data.currentSetElement,g=e.Deferred(),f=e("<img />");b.content.addClass("ui-lightbox-loader");f.attr("src",a).bind("load",function(){e(this).unbind("load");d.width=this.width;d.height=this.height;b.content.removeClass("ui-lightbox-loader").empty().append(this).children().hide();
g.resolve()}).error(function(){b.content.removeClass("ui-lightbox-loader");c.showErrorMessage();g.resolve()}).each(function(){if(this.complete||this.complete===p){var a=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=a}});return g.promise()},loadContentVimeo:function(a){var b=this.data,c=this.$lightbox,d=this,g=e.Deferred(),f=b.providers.vimeo,l=b.currentSetElement,h=l.self.options;c.content.addClass("ui-lightbox-loader");e.ajax({url:f,data:{url:a,
maxwidth:h.videoWidth,maxheight:h.videoHeight},dataType:"jsonp",timeout:5E3}).success(function(a){c.content.removeClass("ui-lightbox-loader").empty().append(a.html).children().wrap("<div style='display: none'></div>").end().find("div:first").width(a.width).height(a.height);!1===h.overwriteTitle&&(l.title=a.title);l.width=a.width;l.height=a.height;g.resolve()}).error(function(){c.content.removeClass("ui-lightbox-loader");d.showErrorMessage();g.resolve()});return g.promise()},loadContentYoutube:function(a){function b(){d.content.removeClass("ui-lightbox-loader");
f.showErrorMessage();l.resolve()}var c;a=this.data;var d=this.$lightbox,g=d.content,f=this,l=e.Deferred(),h=a.providers.youtube,k=a.currentSetElement,n=k.self.options,m=n.videoWidth,r=n.videoHeight,p=a.htmlYoutube;d.content.addClass("ui-lightbox-loader");e.ajax({url:h+k.id+"?callback=?",data:{v:2,alt:"jsonc",prettyprint:!0},dataType:"jsonp",timeout:5E3}).success(function(a){a.error?b():(p=f.replaceHtmlPatterns(p,{width:m,height:r,url:k.id}),c=e("<div></div>"),c.css({display:"none",width:m,height:r}),
g.removeClass("ui-lightbox-loader").empty().append(p).children().wrap(c),!1===n.overwriteTitle&&(k.title=a.data.title),k.width=m,k.height=r,l.resolve())}).error(function(){b()});return l.promise()},navigationGoToElement:function(a){var b=this.data,c=this.sets,d=this.$lightbox,g=b.currentSet;b.currentElementNumber=a;b.currentSetElement=c[g][a-1];this.setNextQueue();d.queueContainer.next.dequeue("lightboxNext")},next:function(){var a=this.data,b=this.sets,c=this.$lightbox,d=a.panoramaOn,g=a.currentSet,
f=a.currentElementNumber,e=a.totalElementsNumber,h=a.currentSetElement.self.options.loop,k=!0;a.ready&&"single"!==g&&!1===d&&(f+1<=e?a.currentElementNumber=f+=1:f+1>e&&h?a.currentElementNumber=f=1:k=!1,k&&(a.currentSetElement=b[g][f-1],this.setNextQueue(),c.queueContainer.next.dequeue("lightboxNext")))},open:function(a){var b=this.data,c=this.sets,d=this.$lightbox,g=a.element;a=this.getSetName(a);e(g).attr("href");b.currentSet=a;b.totalElementsNumber=c[a].length;b.currentElementNumber=this.getCurrentElementNumber(g);
b.currentSetElement=c[a][b.currentElementNumber-1];this.setOpenQueue();this.setNextQueue();this.checkButtonsState();d.queueContainer.open.dequeue("lightboxOpen")},panoramaCenterContent:function(){var a=this.$lightbox,b=this.data.currentSetElement;var c=this.getAvailableScreenSize();var d=c.width;c=c.height;var g=b.width;b=b.height;var f=a.content;a=f.find("img");d=d<g?0:f.width()/2-a.width()/2;c=c<b?0:f.height()/2-a.height()/2;a.css({top:c,left:d})},panoramaCheckAvailability:function(){var a=this.data,
b=a.currentSetElement,c=b.height,d=b.currentHeight;b.currentWidth<b.width||d<c?(this.panoramaShowIcon("expand"),a.enablePanorama=!0):(a.enablePanorama=!1,this.panoramaHideIcon())},panoramaExpand:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement,g=d.self.options;b.panoramaOn=!0;"click"===a.type?this.panoramaShowIcon("shrink","-hover"):this.panoramaShowIcon("shrink");c.content.css("overflow","hidden");c.content.find("img").width(d.width).height(d.height);this.panoramaSetContentSize();
this.panoramaCenterContent();this.queueCenterLightbox();this.updateTitleWidth();g.showMap&&this.panoramaShowMap();this.hideArrow();this.setCursor()},panoramaHideIcon:function(){var a=this.data;this.$lightbox.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink");a.panoramaOn=!1},panoramaHideMap:function(){var a=this.$lightbox;a.map.hide();a.viewport.css({left:-1,top:-1})},panoramaHighlight:function(){var a;this.$lightbox.panoramaIcon.attr("class",function(b,
c){a=c.indexOf("-hover");return-1!==a?c.slice(0,a):c+"-hover"})},panoramaSetContentSize:function(){var a=this.data,b=this.$lightbox;var c=a.currentSetElement;var d=a.minimalLightboxSize;a=d.width;var g=d.height,f=this.getAvailableScreenSize();d=f.width;var e=f.height;f=c.width;c=c.height;c=c>e?e:c<=g?g:c;b.content.width(f>d?d:f<=a?a:f).height(c)},panoramaShowIcon:function(a,b){var c="ui-lightbox-panorama-icon-"+a+(b||"");this.$lightbox.panoramaIcon.show().removeClass().addClass(c)},panoramaShowMap:function(){var a=
this.data;var b=a.minimalLightboxSize;var c=this.$lightbox;var d=c.content;var g=d.find("img");var f=g.width();var e=g.height();var h=a.currentSetElement;var k=a.mapSize;g=k.width/h.width;h=k.height/h.height;f=f<b.width?f:d.width();d=e<b.height?e:d.height();b=Math.ceil(f*g);d=Math.ceil(d*h);c.viewport.width(b).height(d);c.map.show();a.viewportRatio={width:g,height:h}},panoramaShrink:function(a){var b=this.$lightbox;this.data.panoramaOn=!1;a&&"click"===a.type?this.panoramaShowIcon("expand","-hover"):
this.panoramaShowIcon("expand");this.queueResizeLightbox();this.queueCenterContent();b.content.css("overflow","visible");this.updateTitleWidth();this.panoramaHideMap();this.setCursor()},panoramaStart:function(a){this.data.panoramaPosition={xStart:a.pageX,yStart:a.pageY};a.preventDefault()},panoramaStop:function(a){var b=this.data,c=this.$lightbox,d=-1*(a.pageX-b.panoramaPosition.xStart),e=-1*(a.pageY-b.panoramaPosition.yStart),f=c.content,l=b.viewportRatio;b.panoramaOn&&(f.scrollLeft(f.scrollLeft()+
d).scrollTop(f.scrollTop()+e),c.viewport.css({left:f.scrollLeft()*l.width-1,top:f.scrollTop()*l.height-1}));a.stopPropagation()},panoramaToggle:function(a){var b=this.data,c=b.panoramaOn;(b=b.enablePanorama)&&!1===c?this.panoramaExpand(a):b&&c&&this.panoramaShrink(a)},prev:function(){var a=this.data,b=this.sets,c=this.$lightbox,d=a.panoramaOn,e=a.currentSet,f=a.currentElementNumber,l=a.totalElementsNumber,h=a.currentSetElement.self.options.loop,k=!0;a.ready&&"single"!==e&&!1===d&&(1<=f-1?a.currentElementNumber=
--f:1>f-1&&h?a.currentElementNumber=f=l:k=!1,k&&(a.currentSetElement=b[e][f-1],this.setNextQueue(),c.queueContainer.next.dequeue("lightboxNext")))},removeSetElement:function(a){var b=this.data,c=this.sets,d=b.currentSet,e=b.totalElementsNumber;c[d].splice(a-1,1);1===e||"single"===d?(this.closeLightbox(),this.destroy()):(this.destroy(),b.totalElementsNumber=c[d].length,a===e?this.navigationGoToElement(a-1):this.navigationGoToElement(a))},replaceHtmlPatterns:function(a,b){e.each(b,function(b,d){a=a.replace(new RegExp("{"+
b+"}","g"),d)});return a},setButtonState:function(a,b){var c=this.$lightbox;c=b||c.controlButtons;switch(a){case "default":c.removeClass("ui-state-highlight ui-state-disabled");break;case "highlight":c.addClass("ui-state-highlight");break;case "disabled":c.addClass("ui-state-disabled")}},setCursor:function(a){var b=this.data,c=this.$lightbox.contentContainer,d=b.currentSet,e=b.currentSetElement.type,f=b.totalElementsNumber,l=b.currentElementNumber,h=b.side,k=b.panoramaOn,n=b.showErrorMessage,m=b.currentSetElement.self.options.loop;
b.ready?("single"===d||1===f||1===l&&"left"===h||l===f&&"right"===h)&&!1===k&&("image"===e||"image"!==e&&n)?!1===m?c.css("cursor","default"):c.css("cursor","pointer"):k?c.css("cursor","move"):"image"===e||"image"!==e&&n?c.css("cursor","pointer"):c.css("cursor","auto"):c.css("cursor","default");a&&a.preventDefault()},setNextQueue:function(){var a=this.$lightbox,b=[e.proxy(this.queueSlideUpHeader,this),e.proxy(this.queueHideContent,this),e.proxy(this.queueLoadContent,this),e.proxy(this.queueResizeLightbox,
this),e.proxy(this.queueCenterContent,this),e.proxy(this.queueShowContent,this),e.proxy(this.queueSlideDownHeader,this)];a.queueContainer.next.queue("lightboxNext",b)},setOpenQueue:function(){var a=this.$lightbox,b=[e.proxy(this.queueShowOverlay,this),e.proxy(this.queueCenterLightbox,this),e.proxy(this.queueLoadContent,this),e.proxy(this.queueResizeLightbox,this),e.proxy(this.queueCenterContent,this),e.proxy(this.queueShowContent,this),e.proxy(this.queueSlideDownHeader,this)];a.queueContainer.open.queue("lightboxOpen",
b)},setReferences:function(){var a=this.$lightbox;a.root=e("#ui-lightbox");a.panoramaIcon=a.root.find("#ui-lightbox-panorama-icon");a.contentContainer=a.root.find("#ui-lightbox-content-container");a.content=a.contentContainer.find("#ui-lightbox-content");a.arrow=a.contentContainer.find("#ui-lightbox-arrow");a.header=a.root.find("#ui-lightbox-bottombar");a.headerWrapper=a.header.find("#ui-lightbox-title-wrapper");a.overlay=e("#ui-lightbox-overlay");a.next=a.root.find("#ui-lightbox-button-next");a.prev=
a.root.find("#ui-lightbox-button-prev");a.controlButtons=a.next.add(a.prev);a.close=a.root.find("#ui-lightbox-button-close");a.counter=a.root.find("#ui-lightbox-counter");a.title=a.root.find("#ui-lightbox-title");a.map=e("#ui-lightbox-map");a.viewport=a.map.children().eq(0);a.queueContainer={open:e({}),next:e({})}},showArrow:function(a){var b=this.data,c=this.$lightbox.arrow,d=b.showErrorMessage,e=b.side,f=b.currentElementNumber,l=b.totalElementsNumber,h=b.currentSetElement.self.options.loop;b.ready&&
"single"!==b.currentSet&&("image"===b.currentSetElement.type||d)&&!1===b.panoramaOn&&("left"===e&&(1<f||h)?c.show().removeClass("ui-lightbox-arrow-next ui-corner-left").addClass("ui-lightbox-arrow-prev ui-corner-right").find("span").removeClass("ui-icon-carat-1-e").addClass("ui-icon-carat-1-w"):"right"===e&&(f<l||h)?c.show().removeClass("ui-lightbox-arrow-prev ui-corner-right").addClass("ui-lightbox-arrow-next ui-corner-left").find("span").removeClass("ui-icon-carat-1-w").addClass("ui-icon-carat-1-e"):
this.hideArrow());a&&a.preventDefault()},showErrorMessage:function(){var a=this.data,b=this.$lightbox,c=this;var d=a.currentSetElement.self.options;var g=a.currentElementNumber;var f=a.htmlErrorScreen;var l=a.errorScreenSize,h=l.width;l=l.height;f=c.replaceHtmlPatterns(f,{message:d.errorMessage,labelAgain:d.againButtonLabel,labelReject:d.rejectButtonLabel});var k=e(f);d=k.find("#ui-lightbox-error-footer-again");f=k.find("#ui-lightbox-error-footer-reject");d.click(function(){c.navigationGoToElement(g)}).hover(function(){e(this).toggleClass("ui-state-hover")});
f.click(function(){c.removeSetElement(g)}).hover(function(){e(this).toggleClass("ui-state-hover")});b.content.empty().append(k).find("#ui-lightbox-error").width(h).height(l).end().children().hide();a.showErrorMessage=!0},updateCounter:function(){var a=this.data;var b=this.$lightbox,c=a.currentSetElement.self.options;if("single"!==a.currentSet){var d=a.currentElementNumber;a=a.totalElementsNumber}else a=d=1;b.counter.text(d+c.counterDelimiter+a)},updateTitle:function(){var a=this.$lightbox,b=this.data.currentSetElement;
""!==b.title?a.title.empty().append(b.title):a.title.append("&nbsp;")},updateTitleWidth:function(){var a=this.$lightbox;a.header.width(a.content.width()-12)},queueHideContent:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement.self.options;c.content.children().fadeOut(d.animationSpeed,function(){e(this).remove();a()});c.panoramaIcon.hide().removeClass("ui-lightbox-panorama-icon-expand ui-lightbox-panorama-icon-shrink");b.panoramaOn=!1;this.panoramaHideMap()},queueShowOverlay:function(a){var b=
this.data,c=this.$lightbox,d=b.currentSetElement.self;b.ready=!1;this.setCursor();c.overlay.fadeIn(d.options.animationSpeed,a)},queueCenterLightbox:function(a){var b=this.$lightbox.root,c=this.getWindowSize("width"),d=this.getWindowSize("height"),e=b.outerWidth(),f=b.outerHeight();b.css({left:Math.round((c-e)/2)+"px",top:Math.round((d-f)/2)+"px"}).show(0,a)},queueLoadContent:function(a){var b=this.data,c=b.currentSetElement;b.showErrorMessage=!1;switch(c.type){case "image":var d="loadContentImage";
break;case "youtube":d="loadContentYoutube";break;case "vimeo":d="loadContentVimeo";break;case "flash":d="loadContentFlash"}e.when(this[d](c.url)).then(function(){a()})},queueResizeLightbox:function(a){var b=this.data;var c=this.$lightbox,d=b.lightboxPadding,g=b.headerHeight,f=b.currentSetElement,l=f.self.options;var h=b.showErrorMessage;var k=b.errorScreenSize;b=k.width;var n=k.height;k=l.animationSpeed;if("image"===f.type&&!1===h){var m=this.getSizes();h=m.imageTargetWidth;b=m.imageTargetHeight;
var p=m.lightboxTargetWidth;m=m.lightboxTargetHeight;k=c.content.find("img");f.currentWidth=h;f.currentHeight=b;k.width(h).height(b);k=e.isFunction(a)?l.animationSpeed:0}else"youtube"!==f.type&&"vimeo"!==f.type||!1!==h?"flash"===f.type&&!1===h?(p=this.getOptimalSize("width",f.width),m=this.getOptimalSize("height",f.height)):h&&(k=0,p=b,m=n):(p=this.checkMinimalSize("width",f.width),m=this.checkMinimalSize("height",f.height));c.root.find("#ui-lightbox-content").animate({width:p},k).animate({height:m},
k).end().animate({left:(this.getWindowSize("width")-p-d)/2},k).animate({top:(this.getWindowSize("height")-m-d-g)/2},k,a)},queueCenterContent:function(a){var b=this.$lightbox.content,c=b.children();b.children().css({top:b.height()/2-c.outerHeight()/2,left:b.width()/2-c.outerWidth()/2});a&&a()},queueShowContent:function(a){var b=this.data,c=this,d=b.currentSetElement,e=d.self.options,f=b.showErrorMessage;this.$lightbox.content.children().fadeIn(e.animationSpeed,function(){"image"===d.type&&!1===f&&
c.panoramaCheckAvailability();a()})},queueSlideDownHeader:function(a){var b=this.data;this.$lightbox.header.slideDown(b.currentSetElement.self.options.animationSpeed,a);this.updateCounter();this.updateTitleWidth();this.updateTitle();this.checkButtonsState();b.ready=!0;this.setCursor();this.showArrow()},queueSlideUpHeader:function(a){var b=this.data,c=this.$lightbox,d=b.currentSetElement.self.options;b.ready=!1;this.hideArrow();this.setCursor();c.header.slideUp(d.animationSpeed,a)},$lightbox:{},sets:{},
data:{minimalLightboxSize:{width:300,height:300},lightboxPadding:12,headerHeight:57,ready:!1,panoramaOn:!1,mapSize:{width:150,height:100},providers:{vimeo:"http://www.vimeo.com/api/oembed.json?callback=?",youtube:"http://gdata.youtube.com/feeds/api/videos/"},showErrorMessage:!1,currentSetElement:{},enablePanorama:!1,errorScreenSize:{width:500,height:500},htmlFlash:"<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' width='{width}' height='{height}'><param name='movie' value='{url}' />\x3c!--[if !IE]>--\x3e<object type='application/x-shockwave-flash' data='{url}' width='{width}' height='{height}'>\x3c!--<![endif]--\x3e\x3c!--[if !IE]>--\x3e</object>\x3c!--<![endif]--\x3e</object>",
htmlErrorScreen:"<div id='ui-lightbox-error'><div id='ui-lightbox-error-message' class='ui-lightbox-error-icon-sign'>{message}</div><div id='ui-lightbox-error-footer'><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-again' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-refresh'></span><span class='ui-button-text'>{labelAgain}</span></button><button aria-disabled='false' role='button' id='ui-lightbox-error-footer-reject' class='ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary'><span class='ui-button-icon-primary ui-icon ui-icon-trash'></span><span class='ui-button-text'>{labelReject}</span></button></div></div>",
htmlYoutube:"<iframe class='youtube-player' type='text/html' width='{width}' height='{height}' src='http://www.youtube.com/embed/{url}' frameborder='0'></iframe>",htmlLightbox:"<div id='ui-lightbox' class='ui-widget ui-widget-content ui-corner-all' style='display: none'><div id='ui-lightbox-content-container'><div id='ui-lightbox-content' class='ui-widget-content'></div><a id='ui-lightbox-arrow' class='ui-widget-header' style='display: none'><span class='ui-icon'>go</span></a></div><div id='ui-lightbox-bottombar' class='ui-widget-header ui-corner-all' style='display: none'><p id='ui-lightbox-title-wrapper'><span id='ui-lightbox-title'></span></p><p id='ui-lightbox-bottombar-bottom'><a id='ui-lightbox-button-prev' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-w'>prev</span></a><span id='ui-lightbox-counter'></span><a id='ui-lightbox-button-next' class='ui-lightbox-button'><span class='ui-icon ui-icon-circle-arrow-e'>next</span></a></p><a id='ui-lightbox-button-close' class='ui-lightbox-button'><span class='ui-icon ui-icon-closethick'>close</span></a><div id='ui-lightbox-panorama-icon' style='display: none'></div></div></div>",
htmlMap:"<div id='ui-lightbox-map' style='display: none'><div id='ui-lightbox-map-viewport'></div></div>",htmlOverlay:"<div id='ui-lightbox-overlay' class='ui-widget-overlay' style='display: none'></div>"}}})})(jQuery);